# overlays/dev/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: redis-dev          # ‚Üê el destino Kubernetes
nameSuffix: -dev              # ‚Üê sufijo a√±adido a *todos* los objetos

resources:
  - ../../base                # capa base (ya corregida)
  - namespace.yaml            # √∫nico Namespace de este overlay

patches:                      # ü°á lista de parches con selectors
  - path: deployment-patch.yaml
    target:
      kind: Deployment
      name: redis             # ‚Üê nombre ORIGINAL (sin sufijo)

  - path: service-patch.yaml
    target:
      kind: Service
      name: redis

  - path: secret-patch.yaml
    target:
      kind: Secret
      name: conexion
